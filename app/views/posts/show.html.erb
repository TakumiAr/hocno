<div class="show-title">
  <%= @post.title %>
</div>

<div class="image-content">
  <div class="image-container">
    <%= image_tag @post.image.url %>
  </div>
  <div class="show-content">
    <p>投稿者 <%= link_to @post.user.name, user_path(@post.user.id) %></p>
    <p>カテゴリー <%= @post.category.name %></p>
    <div>
      <span>コメント <%= @post.comments.count %></span>
      <span>いいね <%= @post.like_users.count %></span>
    </div>
    <div>
      <span>値段 <%= @post.price %></span>
      <span>予算 <%= @post.budget %></span>
    </div>
    <% unless @post.user_id == current_user.id %>
      <% if @like.present? %>
        <p><%= link_to 'いいねをはずす', like_path(id: @like.id), method: :delete, class: 'btn btn-danger' %></p>
      <% else %>
        <p><%= link_to 'いいね!', likes_path(post_id: @post.id), method: :post, class: 'btn btn-primary' %></p>
      <% end %>
    <% end %>
  </div>
</div>

<div class="post-content">
  <%= @post.content %>
</div>

<div class="show-comment">


  <% @comments.each do |comment| %>
    <% unless comment.id.nil? %>
      <p><%= link_to comment.user.name, user_path(comment.user.id) %></p>
      <p><%= comment.content %></p>
      <p><%= time_ago_in_words(comment.created_at) %> ago</p>
      <% if comment.user == current_user || @post.user == current_user %>
        <p><%= link_to '削除する', post_comment_path(comment.post_id, comment.id), method: :delete %></p>
      <% end %>
    <% end %>
  <% end %>
</div>
<div class="comment-form">
  <%= form_with(model: [@post, @comment], local: true ) do |form| %>
    <div>
      <%= form.text_area :content %>
    </div>
    <div class="comment-button">
      <%= button_tag :type => "submit", :class =>"waves-effect waves-light btn" do %>
        <i class="fa fa-comment right">コメントする</i>
      <% end %>
    </div>
  <% end %>
</div>

<% if @post.user == current_user %>
  <%= link_to 'edit', edit_post_path(@post) %>
  <%= link_to 'delete', post_path(@post), method: :delete, data: { confirm: "Are you sure?" } %>
<% end %>